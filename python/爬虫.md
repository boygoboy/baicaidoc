---
title: Python爬虫
description: 爬虫教程
published: 1
date: 2022-10-13T13:57:49.506Z
tags: 爬虫
editor: markdown
dateCreated: 2022-10-13T13:23:27.722Z
---

# request入门
+ 简介
requests专门用于发送http请求，可以模拟页面的http请求，下面主要介绍以下内容：
（1）发送http请求
（2）设置http请求头
（3）抓取二进制数据
（4）post请求
（5）响应数据
（6）上传文件
（7）处理Cookie
（8）维持会话
（9）ssl证书验证
（10）使用代理
（11）超时处理
（12）身份验证
（13）打包请求
+ 环境安装
执行安装命令
```  shell
pip install requests
```
# 发送http请求
## 基本用法
+ 介绍
使用requests的get方法访问淘宝首页并返回get方法返回值类型、状态码、响应体、Cookie等信息。
+ 代码
``` py
import requests
r = requests.get('https://www.taobao.com')
print(type(r))
print(r.status_code)
print(type(r.text))
print(r.cookies)
print(r.text)
```
## GET请求
+ 描述
（1）get方法带参数有两种方式：
方式一：在url后面用？分隔参数
方式二：使用get方法的params参数将需要的参数以字典的方式存储
（2）两种方式可以共存：
当两种方式共存时会将参数合并，若出现同名参数，会用列表存储，同名参数的值会按先后顺序存放在列表中
+ 代码
``` py
import requests
data = {
    'name':'Bill',
    'country':'中国',
    'age':20
}

r = requests.get('http://httpbin.org/get?name=Mike&country=美国&age=40',params=data)
print(r.text)
print(r.json())
print(r.json()['args']['country'])
```
# 设置http请求头
+ 描述
1. 为get方法添加http请求头需设置get方法的headers参数即可。
2. 该参数是一个字典类型的值，每一对key-value就是一个Cookie，如果设置中文的cookie需要使用quote和unquote进行编码解码。
+ 代码
``` py
import requests
from urllib.parse import quote,unquote

headers = {
    'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.119 Safari/537.36',
    'name':quote('李宁')
}

r = requests.get('http://httpbin.org/get',headers=headers)
print(r.text)
print('Name:',unquote(r.json()['headers']['Name']))
```

