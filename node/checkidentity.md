---
title: web开发身份认证机制
description: web开发身份认证的机制
published: 1
date: 2022-04-24T03:46:40.870Z
tags: session
editor: markdown
dateCreated: 2022-04-24T03:46:40.870Z
---

# session认证机制
1. http协议的无状态性
客户端的每次http请求都是独立的，连续多个请求之间没有直接的关系，服务器不会主动保留每次的http请求的状态，这里可以通过cookie机制突破http协议的无状态性。
2. 什么是cookie
cookie是存储在用户浏览器中的一段不超过4kb的字符串，由一个名称、一个值、和其它几个用于控制cookie有效期、安全性、使用范围的可选属性组成。
不同域名下的cookie各自独立，当客户端发起请求时，会自动把当前域名下所有未过期的cookie一同发送到服务器。
cookie特点：
+ 自动发送
+ 域名独立
+ 过期限制
+ 4kb限制
3. cookie在身份认证中的作用
+ 第一次登陆请求时服务器通过响应头发送cookie给浏览器。
+ 此时会自动将身份认证的cookie保存到浏览器中。
+ 当客户端再次发起请求，会通过请求头自动将cookie发送给服务器。
+ 服务器根据请求头中的cookie验明用户的身份。
4. cookie不具有安全性
因为cookie是存储在浏览器中，并且浏览器提供了读写cookie的api，所以cookie很容易伪造不具有安全性，不建议服务器将隐私数据通过cookie形式发送给浏览器。
5. session认证过程
为解决cookie的不安全性，通过session认证可解决过程如下：
+ 浏览器：客户端登录提交账号密码
+ 服务端：验证账号密码，将登录成功后的用户信息存储在服务器的内存中，同时生成对应的cookie字符串
+ 服务端：服务器响应将生成的cookie响应给客户端
+ 浏览器：客户端再次发起请求时，通过请求头自动把当前域名下所有可用的cookie发送给服务器
+ 服务端：服务器根据请求头中携带的cookie从内存中查找对应的用户信息，用户的身份认证成功后，服务器针对当前用户生产特定响应内容
+ 服务端：服务器响应把当前用户对应的页面内容响应给浏览器